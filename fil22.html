<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link
      rel="stylesheet"
      href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css"
    />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
  </head>
  <body>
    <div class="container">
      <h2>Table</h2>
      <p>
        The .table-responsive class creates a responsive table which will scroll
        horizontally on small devices (under 768px). When viewing on anything
        larger than 768px wide, there is no difference:
      </p>
      <div class="table-responsive">
        <table class="table" id="table">
          <thead>
            <tr>
              <th>#</th>
              <th>Firstname</th>
              <th>Lastname</th>
              <th>Age</th>
              <th>City</th>
              <th>Country</th>
              <th>Action<button id="openpop">Add</button></th>
            </tr>
          </thead>
          <tbody>
          
          </tbody>
        </table>
      </div>
    </div>
    <!-- Modal -->
    <div class="modal fade" id="myModal" role="dialog">
      <div class="modal-dialog">
        <!-- Modal content-->
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal">
              &times;
            </button>
            <h4 class="modal-title">Add Student</h4>
          </div>
          <div class="modal-body">
            <form action="javascript:void(0)">
                <input type="hidden" id="current_index">
              <div class="form-group">
                <label for="fname">First Name:</label>
                <input type="fname" class="form-control" id="fname" />
              </div>
              <div class="form-group">
                <label for="lname">lname:</label>
                <input type="lname" class="form-control" id="lname" />
              </div>
              <div class="form-group">
                <label for="age">age:</label>
                <input type="age" class="form-control" id="age" />
              </div>
              <div class="form-group">
                <label for="city">City:</label>
                <input type="city" class="form-control" id="city" />
              </div>
              <div class="form-group">
                <label for="country">Country:</label>
                <input type="country" class="form-control" id="country" />
              </div>
              <button type="button" class="btn btn-default" id="save">
                Save
              </button>
              <button type="button" class="btn btn-default" id="updatesave">
                Update
              </button>
            </form>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">
              Close
            </button>
          </div>
        </div>
      </div>
    </div>
    <script>
      $(document).ready(function () {
var incr=0;
        $("#openpop").click(function () {
          $("#myModal").modal("show");
          $("#update").hide();
          $("#save").fadeIn();
        });
        $("#save").click(function () {
            incr++;
          let fname = $("#fname").val();
          let lname = $("#lname").val();
          let age = $("#age").val();
          let city = $("#city").val();
          let country = $("#country").val();
      var    table = $('#table');
      table.append("<tr id='incr_"+incr+"' data-r='"+incr+"' ></tr>");
    var tr=table.find('tr:last')
    tr.html("<td class='sr'>1</td><td class='lfname'>"+fname+"</td><td class='llname'>"+lname+"</td><td class='lage'>"+age+"</td><td class='lcity'>"+city+"</td><td class='lcountry'>"+country+"</td><td><button class='btnupdate'>Update</button><button class='delete'>Delete</button></td>");
    table.append(tr);
    let ii=0;
    $(".sr").each(function(index){
        ii++;
        $(this).text(ii);
       
    })
        });

        $(document).on('click','.delete', function()
{
    $(this).parent().parent().remove();
    let ii=0;
    $(".sr").each(function(index){
        ii++;
        $(this).text(ii);
       
    })
});


$(document).on('click','.btnupdate', function()
{
    $("#myModal").modal("show");
          $("#update").fadeIn();
          $("#save").fadeOut();
          let parent=$(this).parent().parent();
          let currenindex=parent.attr('data-r')
        $("#current_index").val(currenindex)
          let ofname=parent.find('.lfname').text();
          let olname=parent.find('.llname').text();
          let oage=parent.find('.lage').text();
          let ocity=parent.find('.lcity').text();
          let ocountry=parent.find('.lcountry').text();
           $("#fname").val(ofname);
           $("#lname").val(olname);
          $("#age").val(oage);
        $("#city").val(ocity);
           $("#country").val(ocountry);

   
});
$("#updatesave").click(function(){
    console.log("update functio called");
    let index=$("#current_index").val()
    let iid="#incr_"+index;
    let fname = $("#fname").val();
          let lname = $("#lname").val();
          let age = $("#age").val();
          let city = $("#city").val();
          let country = $("#country").val();

    $(iid).html("<td class='sr'>1</td><td class='lfname'>"+fname+"</td><td class='llname'>"+lname+"</td><td class='lage'>"+age+"</td><td class='lcity'>"+city+"</td><td class='lcountry'>"+country+"</td><td><button class='btnupdate'>Update</button><button class='delete'>Delete</button></td>");
})
      });
    </script>
  </body>
</html>
